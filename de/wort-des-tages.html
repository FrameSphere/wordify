<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wort des Tages â€“ TÃ¤gliches WortrÃ¤tsel | Wordify</title>
    <meta name="description" content="Das tÃ¤gliche Wort des Tages RÃ¤tsel auf Wordify. Jeden Tag ein neues deutsches 5-Buchstaben-Wort fÃ¼r alle Spieler â€“ errate es in 6 Versuchen!">
    <link rel="canonical" href="https://wordify.pages.dev/de/wort-des-tages.html">
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3654554314003005" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../style.css">
    <style>
        /* Page layout */
        body { align-items: flex-start; }
        .wdt-page { max-width: 600px; width: 100%; margin: 0 auto; padding: 0 0 60px; }

        /* Back link */
        .wdt-topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 4px 0;
            margin-bottom: 4px;
        }
        .back-link {
            display: inline-flex; align-items: center; gap: 5px;
            color: var(--accent-primary); text-decoration: none;
            font-size: 0.9rem; font-weight: 600;
            transition: var(--transition);
        }
        .back-link:hover { color: var(--accent-hover); }

        /* Header */
        .wdt-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .wdt-logo {
            font-size: 1.4rem; font-weight: 800;
            color: var(--accent-primary); margin-bottom: 6px;
        }
        .wdt-logo-icon {
            display: inline-flex; align-items: center; justify-content: center;
            width: 36px; height: 36px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 8px; color: white; font-weight: 900; font-size: 1.1rem;
            margin-right: 6px; vertical-align: middle;
        }
        .wdt-title {
            font-size: 1.6rem; font-weight: 800;
            color: var(--text-primary); margin-bottom: 4px;
        }
        .wdt-subtitle { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 8px; }
        .wdt-date {
            display: inline-block; font-size: 0.8rem; font-weight: 700;
            color: var(--accent-primary); background: var(--bg-secondary);
            border: 1px solid var(--border-color); border-radius: 20px; padding: 3px 14px;
            margin-bottom: 4px;
        }
        .wdt-countdown {
            font-size: 0.8rem; color: var(--text-secondary); margin-top: 4px;
        }
        .wdt-countdown span {
            font-weight: 700; color: var(--text-primary);
            font-variant-numeric: tabular-nums;
        }

        /* Already-played banner */
        .wdt-banner {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-left: 4px solid var(--accent-primary);
            border-radius: 12px; padding: 12px 18px;
            text-align: center; margin-bottom: 16px;
            font-size: 0.9rem; color: var(--text-secondary);
        }
        .wdt-banner strong { color: var(--text-primary); }

        /* Win / Lose Modal â€“ reuse win-modal-overlay styles from style.css */
        .wdt-modal-word {
            margin: 25px 0 20px;
            padding: 18px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 15px; text-align: center;
        }
        .wdt-modal-word.lost {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .wdt-modal-word-label {
            font-size: 0.85rem; color: rgba(255,255,255,.8);
            margin: 0 0 6px; font-weight: 500; text-transform: uppercase; letter-spacing: .05em;
        }
        .wdt-modal-word-value {
            font-size: 2rem; font-weight: 900; color: white;
            letter-spacing: .15em; text-shadow: 0 2px 4px rgba(0,0,0,.2);
        }
        .wdt-emoji-result {
            font-size: 1.3rem; line-height: 1.6; letter-spacing: 2px;
            background: var(--bg-tertiary); border-radius: 10px;
            padding: 12px; margin-bottom: 16px;
        }
        .wdt-next {
            font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 20px;
        }
        .wdt-next strong { color: var(--text-primary); font-variant-numeric: tabular-nums; }

        /* Shake animation */
        .shake { animation: wdtShake .4s ease; }
        @keyframes wdtShake {
            0%,100%{transform:translateX(0)}
            20%,60%{transform:translateX(-6px)}
            40%,80%{transform:translateX(6px)}
        }
    </style>
</head>
<body>
<div class="wdt-page">

    <!-- Topbar -->
    <div class="wdt-topbar">
        <a href="/de/" class="back-link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
            ZurÃ¼ck zum Spiel
        </a>
        <button class="icon-btn" onclick="toggleTheme()" aria-label="Theme wechseln" title="Theme wechseln">
            <svg class="theme-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path class="sun-icon" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                <path class="moon-icon" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
            </svg>
        </button>
    </div>

    <!-- Header -->
    <header class="wdt-header">
        <div class="wdt-logo">
            <span class="wdt-logo-icon">W</span> Wordify
        </div>
        <div class="wdt-title">ğŸ—“ï¸ Wort des Tages</div>
        <div class="wdt-subtitle">Ein Wort fÃ¼r alle â€“ tÃ¤glich neu um Mitternacht</div>
        <div class="wdt-date" id="todayDate"></div>
        <div class="wdt-countdown">NÃ¤chstes Wort in <span id="countdown">--:--:--</span></div>
    </header>

    <!-- Already-played banner (inserted by JS if needed) -->
    <div id="banner" style="display:none;" class="wdt-banner"></div>

    <!-- Game Container â€“ same class as index -->
    <div class="game-container">
        <div class="message" id="message"></div>
        <div class="board" id="board"></div>
        <div class="keyboard" id="keyboard"></div>
    </div>

</div>

<!-- â•â•â•â•â•â•â• WIN MODAL (reuses win-modal-overlay from style.css) â•â•â•â•â•â•â• -->
<div class="win-modal-overlay" id="winModal" style="display:none;">
    <div class="win-modal">
        <div class="win-header">
            <div class="win-icon" id="winIcon">
                <svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
            </div>
            <div class="win-title" id="winTitle">Fantastisch!</div>
            <div class="win-text" id="winText"></div>
        </div>

        <div class="win-stats" id="winStats"></div>

        <div class="wdt-modal-word" id="modalWordBox">
            <div class="wdt-modal-word-label" id="modalWordLabel">Das Wort</div>
            <div class="wdt-modal-word-value" id="modalWordValue"></div>
        </div>

        <div class="wdt-emoji-result" id="emojiResult"></div>
        <div class="wdt-next" id="modalNext"></div>

        <div class="win-actions" id="winActions"></div>
    </div>
</div>

<!-- German word list for validation -->
<script src="/words/words_de.js"></script>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WORT DES TAGES â€“ Kuratierte Wortliste
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DAILY_WORDS = [
    "ABEND","ADLER","AHORN","AMSEL","ANGEL","ANGST","ANKER","APFEL","ARCHE","ATLAS",
    "BACKE","BALKE","BAUCH","BAUEN","BEERE","BESEN","BETON","BIRKE","BIRNE","BLATT",
    "BLICK","BLITZ","BLOCK","BLUME","BODEN","BOHNE","BOMBE","BRAUT","BRAUN","BREIT",
    "BRIEF","BRUCH","BUCHT","BULLE","BUSCH","DACHS","DAMPF","DECKE","DELTA","DOLCH",
    "DRUCK","DUNST","EBENE","EIMER","EISEN","ENGEL","ERNTE","ERSTE","ESCHE","FADEN",
    "FAHNE","FALKE","FARBE","FAUST","FEDER","FEIGE","FEIND","FERNE","FEUER","FISCH",
    "FLACH","FLAMM","FLECK","FLOSS","FLOTT","FLUSS","FORST","FRONT","FUCHS","FUNKE",
    "GABEL","GASSE","GATTE","GEIST","GEMSE","GLANZ","GLEIS","GLÃœCK","GNADE","GRIFF",
    "GRUBE","GRUND","HALTE","HECHT","HERDE","HERZE","HIRTE","HITZE","HÃœGEL","HUMOR",
    "HÃœTTE","INSEL","JAHRE","JOKER","JUBEL","JUNGE","KAMEL","KAPPE","KARTE","KATZE",
    "KEGEL","KETTE","KIPPE","KISTE","KLAGE","KLANG","KNALL","KNAPP","KNIFF","KNOPF",
    "KOHLE","KRAFT","KREIS","KREUZ","KRISE","KRONE","KÃœCHE","LACHS","LADEN","LAKEN",
    "LAMPE","LAUBE","LAUCH","LAUNE","LAUTE","LEHRE","LEISE","LICHT","LIEBE","LINSE",
    "MALER","MARKT","MASKE","MASSE","MAUER","MEILE","MEISE","MEUTE","MITTE","MONAT",
    "MOTIV","MOTTE","MULDE","MÃœNZE","NACHT","NADEL","NEBEL","NETZT","NIETE","NUDEL",
    "OCKER","OLIVE","OPFER","ORDEN","PALME","PANEL","PAUSE","PERLE","PFERD","PFEIL",
    "PHASE","PIRAT","PIXEL","PLANE","PLATZ","POKAL","PREIS","PROBE","PROFI","PUMPE",
    "PUPPE","RABEN","RASTE","RATTE","RAUCH","RAUPE","REGEN","REICH","REISE","RESTE",
    "RINDE","RINGE","ROSTE","ROTTE","RUDEL","RUDER","SAHNE","SALZE","SAMEN","SANFT",
    "SATIN","SEELE","SEGEL","SEIFE","SEITE","SIRUP","SONNE","SORGE","SPALT","SPANN",
    "SPATZ","SPECK","SPEER","SPIEL","SPORT","STERN","STICH","STILL","STOCK","STROH",
    "STURM","SUCHE","TANNE","TAUBE","TEICH","TINTE","TISCH","TITEL","TONNE","TORTE",
    "TRAUM","TRECK","TREFF","TROLL","TROTZ","TULPE","WACHS","WAGEN","WANGE","WARTE",
    "WEDEL","WEIDE","WELLE","WIEGE","WIESE","WOLKE","WONNE","ZANGE","ZIEGE","ZWEIG",
    "ZWERG","ABGAS","ABZUG","ACHSE","ALARM","ALBUM","ALGEN","AMPEL","ENZYM","GIPFEL",
    "GLIED","GREIS","HAKEN","HASEL","HEIDE","HELME","HIRSE","IMKER","JACHT","KARST",
    "KEIME","KIEME","KNABE","KREBS","KUHLE","LAICH","LEHM","LEINE","LINDE","LITER",
    "MÃ–HRE","MATTE","MILCH","MÃ–WE","MULCH","OCHSE","OTTER","PACKE","PACHT","PFOTE",
    "PIROL","POREN","RAMPE","RASPE","RAUFE","REIZE","RINNE","RIPPE","RÃ–HRE","SALBE",
    "SILBE","SKALA","SPORE","STALL","STAMM","STAUB","STEIG","STELE","STIEL","STIFT",
    "STIRN","STROM","STÃœCK","STUTE","SZENE","TALER","THRON","TIGER","TORF","TRIEB",
    "TURBO","ULME","UNKE","VALVE","VERSE","VOLLE","WALDE","WERFT","WITWE","ZAHME",
    "ZEIGE","ZÃ„HNE","RATEN","NOTEN","TAGEN","SAGEN","LEBEN","GEBEN","HABEN","LIEGEN",
    "GEHEN","STEHEN","SEHEN","KAMEN","LEGEN","FRAGEN","ZEIGEN","SUCHEN","FINDEN","LADEN",
    "OSTEN","WESTEN","NORDEN","SÃœDEN","ESSEN","TRINKEN","SCHLAFEN","LAUFEN","SPRINGEN",
    "TANZEN","SINGEN","MALEN","BAUEN","FAHREN","FLIEGEN","SCHWIMMEN","LESEN","SCHREIBEN",
    "LERNEN","LEHREN","HEILEN","KÃ„MPFEN","SIEGEN","HELFEN","SPIELEN","LIEBEN","HASSEN"
].filter(w => w.length === 5).map(w => w.toUpperCase());

// Deduplizieren
const WORD_LIST = [...new Set(DAILY_WORDS)];

// â”€â”€ Heute-SchlÃ¼ssel: lokales Datum â†’ gleiches Wort fÃ¼r alle um 0:00 Uhr Ortszeit
// ABER: fÃ¼r alle Nutzer weltweit soll es dasselbe Wort sein.
// LÃ¶sung: wir nehmen UTC-Datum als Index-Basis, damit um 00:00 UTC gewechselt wird.
// (Alternativ: Ã¤ndere auf lokales Datum wenn gewÃ¼nscht)
function getTodayUTC() {
    const now = new Date();
    return `${now.getUTCFullYear()}-${now.getUTCMonth()+1}-${now.getUTCDate()}`;
}

function getDayIndex() {
    const epoch = new Date('2024-01-01T00:00:00Z');
    const now = new Date();
    const todayUTC = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate());
    const diff = Math.floor((todayUTC - epoch.getTime()) / 86400000);
    return ((diff % WORD_LIST.length) + WORD_LIST.length) % WORD_LIST.length;
}

const ANSWER  = WORD_LIST[getDayIndex()];
const DAY_KEY = 'wdt_played_' + getTodayUTC();  // z.B. "wdt_played_2026-2-22"
const STATS_KEY = 'wordify_wdt_stats';

// â”€â”€ State
let currentRow = 0;
let currentCol = 0;
let board = Array.from({length:6}, () => Array(5).fill(''));
let gameOver = false;
let won = false;

// â”€â”€ DOM
const boardEl    = document.getElementById('board');
const keyboardEl = document.getElementById('keyboard');
const messageEl  = document.getElementById('message');
const winModal   = document.getElementById('winModal');
const bannerEl   = document.getElementById('banner');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BUILD BOARD â€“ exakt wie script.js: .row + .tile
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildBoard() {
    boardEl.innerHTML = '';
    boardEl.style.gridTemplateRows = 'repeat(6,1fr)';
    for (let r = 0; r < 6; r++) {
        const row = document.createElement('div');
        row.className = 'row';
        row.id = `row-${r}`;
        for (let c = 0; c < 5; c++) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.id = `tile-${r}-${c}`;
            row.appendChild(tile);
        }
        boardEl.appendChild(row);
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BUILD KEYBOARD â€“ exakt wie script.js: .keyboard-row + .key
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const KEY_ROWS = [
    ['Q','W','E','R','T','Z','U','I','O','P','Ãœ'],
    ['A','S','D','F','G','H','J','K','L','Ã–','Ã„'],
    ['Enter','Y','X','C','V','B','N','M','âŒ«']
];

function buildKeyboard() {
    keyboardEl.innerHTML = '';
    KEY_ROWS.forEach(keys => {
        const row = document.createElement('div');
        row.className = 'keyboard-row';
        keys.forEach(k => {
            const btn = document.createElement('button');
            btn.className = 'key' + (k === 'Enter' || k === 'âŒ«' ? ' wide' : '');
            btn.textContent = k;
            btn.dataset.key = k;
            btn.addEventListener('click', () => handleKey(k === 'âŒ«' ? 'BACKSPACE' : k.toUpperCase()));
            row.appendChild(btn);
        });
        keyboardEl.appendChild(row);
    });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INPUT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('keydown', e => {
    if (e.ctrlKey || e.metaKey || e.altKey) return;
    const k = e.key.toUpperCase();
    if (k === 'BACKSPACE') handleKey('BACKSPACE');
    else if (k === 'ENTER') handleKey('ENTER');
    else if (/^[A-ZÃ„Ã–Ãœ]$/.test(k)) handleKey(k);
});

function handleKey(key) {
    if (gameOver) return;
    if (key === 'BACKSPACE') deleteLetter();
    else if (key === 'ENTER') submitGuess();
    else if (/^[A-ZÃ„Ã–Ãœ]$/.test(key)) addLetter(key);
}

function addLetter(l) {
    if (currentCol >= 5) return;
    board[currentRow][currentCol] = l;
    const tile = document.getElementById(`tile-${currentRow}-${currentCol}`);
    tile.textContent = l;
    tile.classList.add('filled');
    currentCol++;
}

function deleteLetter() {
    if (currentCol <= 0) return;
    currentCol--;
    board[currentRow][currentCol] = '';
    const tile = document.getElementById(`tile-${currentRow}-${currentCol}`);
    tile.textContent = '';
    tile.classList.remove('filled');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SUBMIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function submitGuess() {
    if (currentCol < 5) {
        showMessage('Bitte ein 5-Buchstaben-Wort eingeben!');
        shakeRow(currentRow); return;
    }
    const guess = board[currentRow].join('');
    if (!isValidWord(guess)) {
        showMessage('Unbekanntes Wort!');
        shakeRow(currentRow); return;
    }
    showMessage('');
    revealRow(currentRow, guess, () => {
        if (guess === ANSWER) {
            won = true; gameOver = true;
            saveResult(true, currentRow + 1);
            markButtonGreen();
            setTimeout(() => openModal(true), 500);
        } else {
            currentRow++;
            currentCol = 0;
            if (currentRow >= 6) {
                gameOver = true;
                saveResult(false, 6);
                setTimeout(() => openModal(false), 500);
            }
        }
    });
}

function isValidWord(w) {
    // Nutze die geladene words_de.js falls verfÃ¼gbar
    if (typeof WORDS_DE !== 'undefined' && Array.isArray(WORDS_DE))
        return WORDS_DE.includes(w) || WORD_LIST.includes(w);
    return WORD_LIST.includes(w) || w.length === 5;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REVEAL â€“ flip mit CSS-Klassen aus style.css
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function revealRow(row, guess, cb) {
    const result = scoreGuess(guess, ANSWER);
    for (let c = 0; c < 5; c++) {
        const tile = document.getElementById(`tile-${row}-${c}`);
        const delay = c * 300;
        setTimeout(() => {
            // flip: erst nach halber animation Farbe setzen
            tile.style.transition = 'transform 0.3s ease';
            tile.style.transform = 'rotateX(90deg)';
            setTimeout(() => {
                tile.classList.remove('filled');
                tile.classList.add(result[c]);
                tile.style.transform = 'rotateX(0deg)';
                updateKey(guess[c], result[c]);
            }, 150);
        }, delay);
    }
    setTimeout(cb, 5 * 300 + 200);
}

function scoreGuess(guess, answer) {
    const result = Array(5).fill('absent');
    const ans = answer.split('');
    const g   = guess.split('');
    const used = Array(5).fill(false);
    for (let i = 0; i < 5; i++) {
        if (g[i] === ans[i]) { result[i] = 'correct'; used[i] = true; g[i] = null; }
    }
    for (let i = 0; i < 5; i++) {
        if (result[i] === 'correct') continue;
        for (let j = 0; j < 5; j++) {
            if (!used[j] && g[i] === ans[j]) { result[i] = 'present'; used[j] = true; break; }
        }
    }
    return result;
}

// â”€â”€ Key colors
const keyState = {};
const PRIO = { correct:3, present:2, absent:1 };
function updateKey(letter, state) {
    if ((PRIO[state]||0) <= (PRIO[keyState[letter]]||0)) return;
    keyState[letter] = state;
    document.querySelectorAll('.key').forEach(btn => {
        if (btn.dataset.key?.toUpperCase() === letter || btn.dataset.key === letter) {
            btn.classList.remove('correct','present','absent');
            btn.classList.add(state);
        }
    });
}

// â”€â”€ Message
let msgTimer;
function showMessage(txt, ms = 2000) {
    messageEl.textContent = txt;
    messageEl.className = 'message' + (txt ? ' error' : '');
    clearTimeout(msgTimer);
    if (txt && ms > 0) msgTimer = setTimeout(() => { messageEl.textContent=''; messageEl.className='message'; }, ms);
}

function shakeRow(r) {
    const row = document.getElementById(`row-${r}`);
    row.classList.add('shake');
    setTimeout(() => row.classList.remove('shake'), 500);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadStats() {
    try { return JSON.parse(localStorage.getItem(STATS_KEY)) || {played:0,won:0,streak:0,maxStreak:0}; }
    catch { return {played:0,won:0,streak:0,maxStreak:0}; }
}

function saveResult(didWin, attempts) {
    if (localStorage.getItem(DAY_KEY)) return; // bereits gespeichert
    localStorage.setItem(DAY_KEY, JSON.stringify({won:didWin, attempts}));
    const s = loadStats();
    s.played++;
    if (didWin) { s.won++; s.streak++; s.maxStreak = Math.max(s.maxStreak, s.streak); }
    else { s.streak = 0; }
    localStorage.setItem(STATS_KEY, JSON.stringify(s));
}

function winRate(s) { return s.played ? Math.round(s.won/s.played*100) : 0; }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EMOJI RESULT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildEmoji() {
    let out = '';
    const rows = won ? currentRow + 1 : 6;
    for (let r = 0; r < rows; r++) {
        if (!board[r][0]) break;
        out += scoreGuess(board[r].join(''), ANSWER)
            .map(s => s==='correct'?'ğŸŸ©':s==='present'?'ğŸŸ¨':'â¬œ').join('') + '\n';
    }
    return out.trim();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openModal(didWin) {
    const s = loadStats();
    const attempts = didWin ? currentRow + 1 : 'X';
    const emoji = buildEmoji();

    // Icon & title
    const iconEl = document.getElementById('winIcon');
    iconEl.style.background = didWin
        ? 'linear-gradient(135deg,var(--accent-primary),var(--accent-secondary))'
        : 'linear-gradient(135deg,#e74c3c,#c0392b)';
    iconEl.innerHTML = didWin
        ? '<svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>'
        : '<svg width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>';

    document.getElementById('winTitle').textContent = didWin ? 'Fantastisch!' : 'Schade!';
    document.getElementById('winText').textContent  = didWin
        ? `In ${attempts} von 6 Versuchen erraten`
        : 'Kein Problem â€“ morgen ein neuer Versuch!';

    // Stats
    document.getElementById('winStats').innerHTML = `
        <div class="win-stat"><div class="stat-label">Gespielt</div><div class="stat-value">${s.played}</div></div>
        <div class="win-stat"><div class="stat-label">Gewonnen</div><div class="stat-value">${winRate(s)}%</div></div>
        <div class="win-stat"><div class="stat-label">Streak</div><div class="stat-value">${s.streak}</div></div>
        <div class="win-stat"><div class="stat-label">Max</div><div class="stat-value">${s.maxStreak}</div></div>
    `;

    // Word box
    const wordBox = document.getElementById('modalWordBox');
    wordBox.className = 'wdt-modal-word' + (didWin ? '' : ' lost');
    document.getElementById('modalWordLabel').textContent = didWin ? 'Das Wort des Tages' : 'Das gesuchte Wort war';
    document.getElementById('modalWordValue').textContent = ANSWER;

    // Emoji result
    document.getElementById('emojiResult').textContent = emoji;

    // Countdown
    document.getElementById('modalNext').innerHTML =
        `NÃ¤chstes Wort des Tages in <strong id="modalCountdown">${getCountdownStr()}</strong>`;

    // Buttons
    const actionsEl = document.getElementById('winActions');
    actionsEl.innerHTML = `
        <button class="win-btn win-btn-primary" onclick="doShare('${emoji.replace(/\n/g,'\\n')}','${attempts}')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
            Ergebnis teilen
        </button>
        <a href="/de/" class="win-btn win-btn-secondary" style="text-decoration:none;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
            Zum normalen Spiel
        </a>
    `;

    winModal.style.display = 'flex';

    // Live countdown in modal
    const modalCountdownInterval = setInterval(() => {
        const el = document.getElementById('modalCountdown');
        if (el) el.textContent = getCountdownStr();
        else clearInterval(modalCountdownInterval);
    }, 1000);
}

winModal.addEventListener('click', e => {
    if (e.target === winModal) winModal.style.display = 'none';
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHARE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function doShare(emoji, attempts) {
    const d = new Date();
    const dateStr = `${d.getDate()}.${d.getMonth()+1}.${d.getFullYear()}`;
    const text = `Wordify â€“ Wort des Tages ğŸ—“ï¸\n${dateStr} | ${attempts}/6\n\n${emoji.replace(/\\n/g,'\n')}\n\nâ–¶ wordify.pages.dev/de/wort-des-tages.html`;
    if (navigator.share) {
        navigator.share({ title:'Wordify Wort des Tages', text });
    } else if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => showMessage('Kopiert! âœ“', 2000));
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COUNTDOWN â€“ Reset um exakt 00:00:00 UTC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getCountdownStr() {
    const now = new Date();
    // NÃ¤chste Mitternacht UTC
    const next = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate() + 1));
    const diff = next - now;
    const h = Math.floor(diff / 3600000);
    const m = Math.floor((diff % 3600000) / 60000);
    const s = Math.floor((diff % 60000) / 1000);
    return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

// PrÃ¼fe ob der Tag gewechselt hat (falls Seite lange offen)
function checkDayRollover() {
    const current = getTodayUTC();
    if (!window._lastDay) window._lastDay = current;
    if (current !== window._lastDay) location.reload(); // neues Wort
}

setInterval(() => {
    document.getElementById('countdown').textContent = getCountdownStr();
    checkDayRollover();
}, 1000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BUTTON AUF INDEX GRÃœN MARKIEREN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function markButtonGreen() {
    // Setzt ein Flag im localStorage, das die index.html ausliest
    localStorage.setItem('wdt_won_' + getTodayUTC(), '1');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATUM ANZEIGEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showDate() {
    const d = new Date();
    const days   = ['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'];
    const months = ['Januar','Februar','MÃ¤rz','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'];
    document.getElementById('todayDate').textContent =
        `${days[d.getDay()]}, ${d.getDate()}. ${months[d.getMonth()]} ${d.getFullYear()}`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleTheme() {
    const next = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('wordifyTheme', next);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function init() {
    // Theme
    const theme = localStorage.getItem('wordifyTheme') || 'light';
    document.documentElement.setAttribute('data-theme', theme);

    buildBoard();
    buildKeyboard();
    showDate();
    document.getElementById('countdown').textContent = getCountdownStr();

    // Bereits heute gespielt?
    const saved = localStorage.getItem(DAY_KEY);
    if (saved) {
        gameOver = true;
        bannerEl.style.display = 'block';
        bannerEl.innerHTML = 'Du hast das heutige RÃ¤tsel bereits gespielt.<br><strong>Das nÃ¤chste Wort erscheint morgen um Mitternacht.</strong>';
        // Trotzdem Statistiken zeigen â€“ Modal nach kurzer Pause Ã¶ffnen
        try {
            const data = JSON.parse(saved);
            setTimeout(() => openModal(data.won), 500);
        } catch {}
    }
})();
</script>

<!-- Inline: index.html Button grÃ¼n fÃ¤rben â€“ dieses Skript lÃ¤uft auf der wort-des-tages Seite NICHT,
     es ist nur ein Reminder: die index.html liest wdt_won_DATUM aus localStorage -->
</body>
</html>
